% Add support for UTF-8 character set for those engines that do not support it natively.
\usepackage[utf8]{inputenc}

% Handle multi-glyph characters in the output PDF correctly
\usepackage[T1]{fontenc}

% Main font with math support
\usepackage[charter,cal=cmcal]{mathdesign}
% Sans serif font
\usepackage[scaled=.88]{berasans}
% Monospace font (for code)
\usepackage[scaled=.82]{DejaVuSansMono}

% Verbatim source code environment (code listing)
\usepackage{listings}
% Formatting of code listings
\lstset{%
    frame=single,
    basicstyle=\fontsize{9}{10}\ttfamily,
    keywordstyle=\color{thesisblue}\bfseries,
    stringstyle=\color{thesisred},
    commentstyle=\color{thesisgreen},
    identifierstyle=\color{black},
    numberstyle=\fontsize{7}{8}\selectfont
}
% Renew \lstlistoflistings command to avoid issues with incorrect headers for long lists
% Uses unnumbered chapter instead of a float like in the original source code.
% Based on source code for listings package https://ctan.uib.no/macros/latex/contrib/listings/listings.dtx line: 14635
\renewcommand*{\lstlistoflistings}{%
       \chapter*{\lstlistlistingname}%
       \parskip\z@\parindent\z@\parfillskip \z@ \@plus 1fil%
       \@starttoc{lol}%
       }%

% Consistent language in different packages, such as double quotes with \enquote and
% American-style hyphenation.
\usepackage[american]{babel}

% Page layout
\usepackage{geometry}                   
% Page geometry and spacing (same for even and odd pages)
\geometry{left=4cm, right=4cm, top=4cm, bottom=4.5cm}

% Custom list formatting, such as noitemsep and label
\usepackage{enumitem}
% Itemize and enumerate: tighter and with other symbols
\setlist[enumerate]{itemsep=0mm, topsep=5pt, partopsep=0mm, parsep=0mm}
\setlist[enumerate,1]{label=\arabic*., ref=\arabic*}
\setlist[enumerate,2]{label=\alph*., ref=\alph*}
\setlist[enumerate,3]{label=\roman*., ref=\roman*}
\setlist[itemize]{itemsep=0mm, topsep=5pt, partopsep=0mm, parsep=0mm}
\setlist[itemize,1]{label=$\bullet$}
\setlist[itemize,2]{label=$\circ$}
\setlist[itemize,3]{label=$-$}

% For inserting images into figures
\usepackage{graphicx}                   % including figures
\graphicspath{{./img/}{./tikz/}}

% Common math environments such as \begin{align}, and much, much more.
% Docs: http://texdoc.net/texmf-dist/doc/latex/amsmath/amsldoc.pdf
\usepackage{amsmath}

% Allows definition of colors using \definecolor{}{}{}
\usepackage{xcolor}

% Sub-figures with captions within figures and customisation of captions
\definecolor{dark-gray}{gray}{0.25}
\usepackage[
    font={small,color=dark-gray},
    labelfont={bf, color=black},
    margin=\parindent
]{caption}                    
% Sub-figures with captions within figures
\usepackage[
    font=small,
    labelfont=bf,
    margin=\parindent
]{subcaption}

% Empty pages should be blank
\usepackage{emptypage}

% Recommended for BibLaTeX
% Correctly formatted quotation marks with \enquote{text}
\usepackage{csquotes}                   

% Sitation management.
% Docs: http://ctan.uib.no/macros/latex/contrib/biblatex/doc/biblatex.pdf
% Tutorial: https://www.overleaf.com/learn/latex/Articles/Getting_started_with_BibLaTeX
\usepackage[
    backend=biber,
    style=ieee,
    maxbibnames=99,
    minbibnames=3,
    maxcitenames=2,
    mincitenames=1,
    citestyle=numeric-comp,
    sorting=none,
    dashed=false
]{biblatex}
% Make \fullcite show all authors irrespectively of maxcitenames
\preto\fullcite{\AtNextCite{\defcounter{maxnames}{99}}}
% Be more aggressive when it comes to breaking up URLs in the bibliography
% https://tex.stackexchange.com/a/422888
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{7000}
\setcounter{biburlnumpenalty}{7000}

% Tables from csv files
\usepackage{csvsimple}

% Nicer formatting of tables with \toprule, \midrule, and \bottomrule
\usepackage{booktabs}

% Auto-generated filler text
\usepackage{lipsum}

% Used by our custom "algorithm" environment
\usepackage{framed}

% Create figures with semantic code
\usepackage{tikz}
% Allow three-dimensional coordinate specifications
% https://ctan.uib.no/graphics/pgf/contrib/tikz-3dplot/tikz-3dplot_documentation.pdf
% Example usage: https://tex.stackexchange.com/a/212612
\usepackage{tikz-3dplot}
% Allow calculations within curly brackets in tikz figures
\usetikzlibrary{calc, math}
% Adds the braces decoration for showing distances in tikz figures
\usetikzlibrary{decorations.pathreplacing}
% For drawing matrices, useful for masking demonstration
\usetikzlibrary{matrix}
% For bent arrows, amongst others
\usetikzlibrary{arrows}
% Use relative positioning in nodes and paths
% Syntax: below=<optional length> of ...
% https://tex.stackexchange.com/a/25685
\usetikzlibrary{positioning}
% Include .tikz images with \includegraphics, supporting proper scaling
% https://ctan.uib.no/graphics/pgf/contrib/tikzscale/tikzscale.pdf
\usepackage{tikzscale}
% Allow the use of the \spy command in tikz, creating a looking glass effect
% Section 50: http://www.texample.net/media/pgf/builds/pgfmanualCVS2012-11-04.pdf
\usetikzlibrary{spy}

% Proper formatting of units by using \SI{value}{\unit}
% We enable use of \giga\byte and other binary units
\usepackage[binary-units=true]{siunitx}
\DeclareSIUnit\pixel{px}
\DeclareSIUnit\flops{FLOPS}
\sisetup{range-phrase=~--~}

% Wrap text around figures
\usepackage{wrapfig}

% Defines the \vcentcolon symbol, used by the \defeq command
\usepackage{mathtools}

% Allows for H placement specifier in figure environments
% NB! Should be used sparingly.
\usepackage{float}

% Wrapfigure environment for wrapping text around figures
\usepackage{wrapfig}

% Nice inline fractions
\usepackage{nicefrac}

% For adding TODO notes in the margin
\usepackage{todonotes}

% Lots of small micro-typographical improvements
\usepackage{microtype}

% NB! Should be the last packages defined
% Interactive cross references
\usepackage{hyperref}
% Settings for hyperref: setting all the links black for best printing. They will still be clickable in the PDF
\hypersetup{%
    colorlinks=true,     
    linkcolor=black,    % internal links (change box color with linkbordercolor)
    citecolor=black,    % links to bibliography
    filecolor=black,    % file links
    urlcolor=black      % external links
}

% Automatic cross references
\usepackage[
    capitalize,
    noabbrev
]{cleveref}
